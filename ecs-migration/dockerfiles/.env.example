# =============================================================================
# LGTM Stack 공통 환경변수
# 이 파일을 .env로 복사하여 실제 값을 설정하세요
# =============================================================================

# -----------------------------------------------------------------------------
# AWS 설정
# -----------------------------------------------------------------------------
AWS_REGION=ap-northeast-2

# -----------------------------------------------------------------------------
# S3 버킷 (서비스별)
# -----------------------------------------------------------------------------
LGTM_S3_BUCKET=jsj-lgtm-data-s3
LOKI_S3_BUCKET=${LGTM_S3_BUCKET}
MIMIR_S3_BUCKET=${LGTM_S3_BUCKET}
TEMPO_S3_BUCKET=${LGTM_S3_BUCKET}
PYROSCOPE_S3_BUCKET=${LGTM_S3_BUCKET}

# -----------------------------------------------------------------------------
# S3 Storage Prefix (서비스별 폴더)
# -----------------------------------------------------------------------------
LOKI_STORAGE_PREFIX=loki
TEMPO_STORAGE_PREFIX=tempo
MIMIR_BLOCKS_PREFIX=blocks
MIMIR_RULES_PREFIX=rules
MIMIR_ALERTS_PREFIX=alerts

# -----------------------------------------------------------------------------
# CloudMap Service Discovery 도메인
# -----------------------------------------------------------------------------
SERVICE_DISCOVERY_NAMESPACE=lgtm.local

# -----------------------------------------------------------------------------
# 서비스 엔드포인트 (CloudMap 기반)
# -----------------------------------------------------------------------------
MIMIR_HOST=mimir.${SERVICE_DISCOVERY_NAMESPACE}
LOKI_HOST=loki.${SERVICE_DISCOVERY_NAMESPACE}
TEMPO_HOST=tempo.${SERVICE_DISCOVERY_NAMESPACE}
PYROSCOPE_HOST=pyroscope.${SERVICE_DISCOVERY_NAMESPACE}
GRAFANA_HOST=grafana.${SERVICE_DISCOVERY_NAMESPACE}
ALLOY_HOST=alloy.${SERVICE_DISCOVERY_NAMESPACE}

# -----------------------------------------------------------------------------
# 서비스 포트
# -----------------------------------------------------------------------------
MIMIR_PORT=8080
LOKI_PORT=3100
TEMPO_PORT=3200
TEMPO_OTLP_GRPC_PORT=4317
TEMPO_OTLP_HTTP_PORT=4318
PYROSCOPE_PORT=4040
PYROSCOPE_GRPC_PORT=4041
GRAFANA_PORT=3000
ALLOY_PORT=12345
MEMBERLIST_PORT=7946

# -----------------------------------------------------------------------------
# 테넌트 설정
# -----------------------------------------------------------------------------
LGTM_TENANT_ID=jsj-lgtm

# -----------------------------------------------------------------------------
# Mimir Remote Write URL (Tempo metrics-generator용)
# -----------------------------------------------------------------------------
MIMIR_REMOTE_WRITE_URL=http://${MIMIR_HOST}:${MIMIR_PORT}/api/v1/push

# -----------------------------------------------------------------------------
# Grafana Datasource URLs
# -----------------------------------------------------------------------------
MIMIR_DATASOURCE_URL=http://${MIMIR_HOST}:${MIMIR_PORT}/prometheus
LOKI_DATASOURCE_URL=http://${LOKI_HOST}:${LOKI_PORT}
TEMPO_DATASOURCE_URL=http://${TEMPO_HOST}:${TEMPO_PORT}
PYROSCOPE_DATASOURCE_URL=http://${PYROSCOPE_HOST}:${PYROSCOPE_PORT}
